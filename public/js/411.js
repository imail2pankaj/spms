(self.webpackChunk=self.webpackChunk||[]).push([[411],{411:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>D});var a=r(4359),n={class:"flex justify-between flex-col md:flex-row mb-2"},o={class:"mt-3 text-2xl font-bold"},s={class:"md:grid md:grid-cols-3 md:gap-6 mb-6"},c={class:"bg-white overflow-hidden shadow-sm rounded-lg w-full max-w-sm mb-6"},u={class:"p-6 bg-white "},l={class:"block"},i=(0,a.createVNode)("h3",{class:"input-form-sub-heading mb-4",style:{paddingTop:0}},"Created",-1),d={class:"shadow-md p-4 rounded-md border border-gray-200 mb-4"},p=(0,a.createVNode)("div",{class:"flex justify-between mt-2"},[(0,a.createVNode)("span",{class:"pt-0.5 text-xs text-gray-400"},"Press enter to save task"),(0,a.createVNode)("button",{type:"submit",class:"link-blue text-xs p-1 pull-right"}," Save ")],-1),k={class:"bg-white overflow-hidden shadow-sm rounded-lg w-full max-w-sm mb-6"},v={class:"p-6 bg-white "},f={class:"block"},m=(0,a.createVNode)("h3",{class:"input-form-sub-heading mb-4",style:{paddingTop:0}},"Active",-1),h={class:"bg-white overflow-hidden shadow-sm rounded-lg w-full max-w-sm mb-6"},w={class:"p-6 bg-white "},g={class:"block"},b=(0,a.createVNode)("h3",{class:"input-form-sub-heading mb-4",style:{paddingTop:0}},"Completed",-1);var x=r(7757),y=r.n(x),V=r(408),N={class:"p-1 text-sm flex hover:bg-gray-100 cursor-pointer border border-gray-200 rounded-md mt-1 "};var C=r(2119),T=r(7013),B=r(2871);function _(e,t,r,a,n,o,s){try{var c=e[o](s),u=c.value}catch(e){return void r(e)}c.done?t(u):Promise.resolve(u).then(a,n)}const S={props:{task:{required:!0,type:Object},task_type:{required:!0,type:String}},setup:function(e){var t=(0,T.oR)(),r=(0,a.computed)((function(){return t.state.user})),n=(0,C.tv)(),o=(0,V.Z)().startTask;return{task:e.task,user:r,task_type:e.task_type,deleteTask:function(){},startTaskStatus:function(){var e,r=(e=y().mark((function e(r,a){var n,s;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={id:0,project_id:0,user_id:0,title:null,total_time:0,task_status:"Created",time:(0,B.GQ)()},e.next=3,o(r,a);case 3:"Started"===(s=e.sent).data.task_status||"Active"===s.data.task_status?t.commit("setCurrentTask",s.data):"Paused"===s.data.task_status&&t.commit("setCurrentTask",n);case 5:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(a,n){var o=e.apply(t,r);function s(e){_(o,a,n,s,c,"next",e)}function c(e){_(o,a,n,s,c,"throw",e)}s(void 0)}))});return function(e,t){return r.apply(this,arguments)}}(),openModal:function(e,t){var r={name:"project.task.edit",params:{slug:e,id:t}};n.push(r)}}},render:function(e,t,r,n,o,s){var c=(0,a.resolveComponent)("play-icon"),u=(0,a.resolveComponent)("pause-icon"),l=(0,a.resolveComponent)("delete-icon");return(0,a.openBlock)(),(0,a.createBlock)("div",N,[(0,a.createVNode)("span",{class:"flex-1",onClick:t[1]||(t[1]=function(e){return n.openModal(n.task.project.slug,n.task.id)})},(0,a.toDisplayString)(n.task.title),1),(0,a.createVNode)("span",null,[n.user.id===n.task.user_id&&"Created"===n.task_type?((0,a.openBlock)(),(0,a.createBlock)("button",{key:0,title:"Start Task",onClick:t[2]||(t[2]=function(e){return n.startTaskStatus(n.task.id,"Started")}),class:"w-4 p-1 transform hover:text-purple-500 hover:scale-110 focus:outline-none focus:ring focus:border-blue-300"},[(0,a.createVNode)(c)])):(0,a.createCommentVNode)("",!0),n.user.id===n.task.user_id&&"Active"===n.task_type?((0,a.openBlock)(),(0,a.createBlock)("button",{key:1,onClick:t[3]||(t[3]=function(e){return n.startTaskStatus(n.task.id,"Active"==n.task.task_status?"Paused":"Active")}),class:"w-4 p-1 transform hover:text-purple-500 hover:scale-110 focus:outline-none focus:ring focus:border-blue-300"},["Paused"==n.task.task_status?((0,a.openBlock)(),(0,a.createBlock)(c,{key:0})):(0,a.createCommentVNode)("",!0),"Active"==n.task.task_status||"Started"==n.task.task_status?((0,a.openBlock)(),(0,a.createBlock)(u,{key:1})):(0,a.createCommentVNode)("",!0)])):(0,a.createCommentVNode)("",!0),(0,a.createVNode)("button",{title:"Delete Task",onClick:t[4]||(t[4]=function(e){return n.deleteTask(n.task.id)}),class:"w-5 p-1 transform hover:text-purple-500 hover:scale-110 focus:outline-none focus:ring focus:border-blue-300"},[(0,a.createVNode)(l)])])])}};function j(e,t,r,a,n,o,s){try{var c=e[o](s),u=c.value}catch(e){return void r(e)}c.done?t(u):Promise.resolve(u).then(a,n)}function P(e){return function(){var t=this,r=arguments;return new Promise((function(a,n){var o=e.apply(t,r);function s(e){j(o,a,n,s,c,"next",e)}function c(e){j(o,a,n,s,c,"throw",e)}s(void 0)}))}}const A={components:{TaskItem:S},props:{slug:{required:!0,type:String}},setup:function(e){var t=(0,C.yj)(),r=(0,T.oR)(),n=e.slug,o=(0,V.Z)(),s=o.project,c=o.storeTask,u=o.getProjectBySlug,l=o.getTasks,i=(0,a.ref)(null),d=(0,a.computed)((function(){return r.state.currentTask})),p=(0,a.ref)({created:[],active:[],completed:[]});(0,a.onMounted)(P(y().mark((function e(){return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u(n,"task");case 2:return p.value.created=[],p.value.active=[],p.value.completed=[],e.next=7,l();case 7:p.value=e.sent;case 8:case"end":return e.stop()}}),e)})))),(0,a.watch)((function(){return t.params.slug}),function(){var e=P(y().mark((function e(t){return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=9;break}return e.next=3,u(t,"task");case 3:return p.value.created=[],p.value.active=[],p.value.completed=[],e.next=8,l();case 8:p.value=e.sent;case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),(0,a.watch)((function(){return d.value.time}),function(){var e=P(y().mark((function e(t){return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=8;break}return console.log(t),p.value.created=[],p.value.active=[],p.value.completed=[],e.next=7,l();case 7:p.value=e.sent;case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());var k=function(){var e=P(y().mark((function e(){return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!i.value){e.next=6;break}return e.next=3,c(s.value.id,{title:i.value});case 3:return e.next=5,u(n,"task");case 5:i.value="";case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),v=function(){var e=P(y().mark((function e(t){return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:setTimeout(P(y().mark((function e(){return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u(n,"task");case 2:return e.next=4,l();case 4:p.value=e.sent;case 5:case"end":return e.stop()}}),e)}))),3e3);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return{task_title:i,tasks:p,saveTask:k,project:s,slug:n,onClickChild:v,currentTask:d}},render:function(e,t,r,x,y,V){var N=(0,a.resolveComponent)("app-project-nav"),C=(0,a.resolveComponent)("TaskItem"),T=(0,a.resolveComponent)("router-view");return(0,a.openBlock)(),(0,a.createBlock)(a.Fragment,null,[(0,a.createVNode)("div",n,[(0,a.createVNode)("h1",o,(0,a.toDisplayString)(x.project.title)+" | Tasks",1),(0,a.createVNode)(N,{slug:x.slug},null,8,["slug"])]),(0,a.createVNode)("div",s,[(0,a.createVNode)("div",c,[(0,a.createVNode)("div",u,[(0,a.createVNode)("div",l,[i,(0,a.createVNode)("div",d,[(0,a.createVNode)("form",{onSubmit:t[2]||(t[2]=(0,a.withModifiers)((function(){return x.saveTask&&x.saveTask.apply(x,arguments)}),["prevent"]))},[(0,a.withDirectives)((0,a.createVNode)("input",{type:"text",placeholder:"Enter task title",name:"task_title",autocomplete:"off","onUpdate:modelValue":t[1]||(t[1]=function(e){return x.task_title=e}),class:"input-form-control"},null,512),[[a.vModelText,x.task_title]]),p],32)]),(0,a.createVNode)("div",null,[((0,a.openBlock)(!0),(0,a.createBlock)(a.Fragment,null,(0,a.renderList)(x.tasks.created,(function(e,t){return(0,a.openBlock)(),(0,a.createBlock)(C,{key:t,task:e,task_type:"Created"},null,8,["task"])})),128))])])])]),(0,a.createVNode)("div",k,[(0,a.createVNode)("div",v,[(0,a.createVNode)("div",f,[m,(0,a.createVNode)("div",null,[((0,a.openBlock)(!0),(0,a.createBlock)(a.Fragment,null,(0,a.renderList)(x.tasks.active,(function(e,t){return(0,a.openBlock)(),(0,a.createBlock)(C,{key:t,task:e,task_type:"Active"},null,8,["task"])})),128))])])])]),(0,a.createVNode)("div",h,[(0,a.createVNode)("div",w,[(0,a.createVNode)("div",g,[b,(0,a.createVNode)("div",null,[((0,a.openBlock)(!0),(0,a.createBlock)(a.Fragment,null,(0,a.renderList)(x.project.completed,(function(e,t){return(0,a.openBlock)(),(0,a.createBlock)(C,{key:t,task:e,task_type:"Completed"},null,8,["task"])})),128))])])])])]),(0,a.createTextVNode)(" "+(0,a.toDisplayString)(x.currentTask)+" ",1),(0,a.createVNode)(T,(0,a.mergeProps)(e.$attrs,{onClicked:x.onClickChild}),{default:(0,a.withCtx)((function(e){var t=e.Component;return[(0,a.createVNode)(a.Transition,{name:"fade",mode:"out-in"},{default:(0,a.withCtx)((function(){return[((0,a.openBlock)(),(0,a.createBlock)((0,a.resolveDynamicComponent)(t)))]})),_:2},1024)]})),_:1},16,["onClicked"])],64)}},D=A}}]);