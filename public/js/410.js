(self.webpackChunk=self.webpackChunk||[]).push([[410],{6410:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>F});var o=r(4359),n={class:"flex justify-between flex-col md:flex-row mb-2"},a={class:"mt-3 text-2xl font-bold"},l={class:"bg-white overflow-hidden shadow-sm rounded-lg"},c={class:"p-6 bg-white border-b border-gray-200"},s={class:"grid grid-cols-3 gap-4"},d={class:""},i={class:"mb-6"},u={for:"title",class:"input-form-label"},p=(0,o.createTextVNode)("Title "),f={class:"mb-6"},m={for:"start_date",class:"input-form-label"},v=(0,o.createTextVNode)("Start Date "),x={class:"mb-6"},V={for:"end_date",class:"input-form-label"},N=(0,o.createTextVNode)("End Date "),h=(0,o.createVNode)("div",{class:"mb-6"},[(0,o.createVNode)("button",{type:"submit",class:"btn-blue"}," Submit ")],-1),g={class:"col-span-2"},y={class:"min-w-max w-full table-auto"},b=(0,o.createVNode)("thead",null,[(0,o.createVNode)("tr",{class:"bg-gray-200 text-gray-600 uppercase text-sm leading-normal"},[(0,o.createVNode)("th",{class:"py-2 px-2 text-left"},"Title"),(0,o.createVNode)("th",{class:"py-2 px-2 text-left"},"Start Date"),(0,o.createVNode)("th",{class:"py-2 px-2 text-left"},"End Date"),(0,o.createVNode)("th",{class:"py-2 px-2 text-center"},"Action")])],-1),w={class:"text-gray-900 text-sm font-light"},k={class:"py-2 px-2 text-left whitespace-nowrap"},D={class:"py-2 px-2 text-left whitespace-nowrap"},M={class:"py-2 px-2 text-left whitespace-nowrap"},_={class:"py-2 px-2 text-center"},S={key:0},C=(0,o.createVNode)("td",{class:"py-2 px-2 text-center",colspan:"4"},"No Milestones found",-1);var B=r(7757),T=r.n(B),j=r(408);function P(e,t,r,o,n,a,l){try{var c=e[a](l),s=c.value}catch(e){return void r(e)}c.done?t(s):Promise.resolve(s).then(o,n)}function q(e){return function(){var t=this,r=arguments;return new Promise((function(o,n){var a=e.apply(t,r);function l(e){P(a,o,n,l,c,"next",e)}function c(e){P(a,o,n,l,c,"throw",e)}l(void 0)}))}}const E={props:{slug:{required:!0,type:String}},setup:function(e){var t=e.slug,r=(0,o.ref)([]),n=(0,o.ref)(!1),a=(0,o.ref)(0),l=(0,j.Z)(),c=l.project,s=l.deleteMilestone,d=l.getProjectBySlug,i=l.getProjectMilestones,u=l.submitProjectMilestone,p=(0,o.ref)({title:"",start_date:"",end_date:""});(0,o.onMounted)(q(T().mark((function e(){return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d(t,"milestone");case 2:return e.next=4,f();case 4:case"end":return e.stop()}}),e)}))));var f=function(){var e=q(T().mark((function e(){return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i();case 2:r.value=e.sent;case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),m=function(){n.value=!n.value},v=function(){var e=q(T().mark((function e(t){return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s(c.value.id,t);case 2:return e.next=4,f();case 4:m();case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return{project:c,form:p,slug:t,saveMilestone:function(){var e=q(T().mark((function e(){var t,r;return T().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(r in t=new FormData,p.value)t.append(r,p.value[r]);return e.next=4,u(c.value.id,t);case 4:return e.next=6,f();case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),item_id:a,milestones:r,destroyRecord:v,showModal:n,togglePopup:m}},render:function(e,t,r,B,T,j){var P=(0,o.resolveComponent)("app-project-nav"),q=(0,o.resolveComponent)("app-required"),E=(0,o.resolveComponent)("delete-icon"),F=(0,o.resolveComponent)("app-confirm-delete");return(0,o.openBlock)(),(0,o.createBlock)(o.Fragment,null,[(0,o.createVNode)("div",n,[(0,o.createVNode)("h1",a,(0,o.toDisplayString)(B.project.title)+" | Milestones ",1),(0,o.createVNode)(P,{slug:B.slug},null,8,["slug"])]),(0,o.createVNode)("div",l,[(0,o.createVNode)("div",c,[(0,o.createVNode)("div",s,[(0,o.createVNode)("div",d,[(0,o.createVNode)("form",{onSubmit:t[4]||(t[4]=(0,o.withModifiers)((function(){return B.saveMilestone&&B.saveMilestone.apply(B,arguments)}),["prevent"]))},[(0,o.createVNode)("div",i,[(0,o.createVNode)("label",u,[p,(0,o.createVNode)(q)]),(0,o.withDirectives)((0,o.createVNode)("input",{type:"text",placeholder:"Title","onUpdate:modelValue":t[1]||(t[1]=function(e){return B.form.title=e}),id:"title",name:"title",class:"input-form-control",required:""},null,512),[[o.vModelText,B.form.title]])]),(0,o.createVNode)("div",f,[(0,o.createVNode)("label",m,[v,(0,o.createVNode)(q)]),(0,o.withDirectives)((0,o.createVNode)("input",{type:"date",placeholder:"Start Date","onUpdate:modelValue":t[2]||(t[2]=function(e){return B.form.start_date=e}),id:"start_date",name:"start_date",class:"input-form-control",required:""},null,512),[[o.vModelText,B.form.start_date]])]),(0,o.createVNode)("div",x,[(0,o.createVNode)("label",V,[N,(0,o.createVNode)(q)]),(0,o.withDirectives)((0,o.createVNode)("input",{type:"date",placeholder:"End Date","onUpdate:modelValue":t[3]||(t[3]=function(e){return B.form.end_date=e}),id:"end_date",name:"end_date",class:"input-form-control",required:""},null,512),[[o.vModelText,B.form.end_date]])]),h],32)]),(0,o.createVNode)("div",g,[(0,o.createVNode)("table",y,[b,(0,o.createVNode)("tbody",w,[((0,o.openBlock)(!0),(0,o.createBlock)(o.Fragment,null,(0,o.renderList)(B.milestones,(function(e,t){return(0,o.openBlock)(),(0,o.createBlock)("tr",{key:t,class:"border-b border-gray-200 hover:bg-gray-100"},[(0,o.createVNode)("td",k,(0,o.toDisplayString)(e.title),1),(0,o.createVNode)("td",D,(0,o.toDisplayString)(e.start_date),1),(0,o.createVNode)("td",M,(0,o.toDisplayString)(e.end_date),1),(0,o.createVNode)("td",_,[(0,o.createVNode)("button",{type:"button",onClick:function(t){B.item_id=e.id,B.togglePopup()},class:"no-underline w-4 mr-2 transform hover:text-purple-500 hover:scale-110"},[(0,o.createVNode)(E)],8,["onClick"])])])})),128)),B.milestones.length?(0,o.createCommentVNode)("",!0):((0,o.openBlock)(),(0,o.createBlock)("tr",S,[C]))])])])])])]),(0,o.withDirectives)((0,o.createVNode)(F,{modalHeadline:"Delete Milestone?",deleteMessage:"Are you sure?",onDeleteRecordEvent:t[5]||(t[5]=function(e){return B.destroyRecord(B.item_id)}),onClose:B.togglePopup},null,8,["onClose"]),[[o.vShow,B.showModal]])],64)}},F=E}}]);